image: python:3.11

# Определение этапов
stages:
  - lint
  - test

# Общие настройки перед каждым этапом
before_script:
  - python -m pip install --upgrade pip
  - pip install -r requirements.txt  # Устанавливаем зависимости из вашего проекта
  - pip install flake8 isort black mypy pytest factory-boy  # Устанавливаем линтеры и тестовые библиотеки

# Этап запуска линтеров
lint:
  stage: lint
  script:
    - flake8 app/  # Проверка кода на ошибки стиля
    - isort --check-only app/  # Проверка порядка импортов
    - black --check app/  # Проверка форматирования
    - mypy app/  # Проверка аннотаций типов

# Этап запуска тестов
test:
  stage: test
  script:
    - pytest app/tests/  # Запуск тестов
